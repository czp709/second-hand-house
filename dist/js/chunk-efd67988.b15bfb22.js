(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-efd67988"],{"43b0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Sidebar"},[a("div",{staticClass:"btns"},[a("a",{staticClass:"file",attrs:{href:"javascript:;"}},[t._v("选择文件\n          "),a("input",{ref:"upload",staticClass:"outputlist_upload",attrs:{type:"file",name:"",id:"",accept:".xls, .xlsx"}})]),a("el-button",{staticClass:"daochu",attrs:{type:"primary",icon:"el-icon-document"},on:{click:t.download}},[t._v("导入模板下载")]),a("el-button",{staticClass:"daochu",attrs:{type:"primary",icon:"el-icon-document"},on:{click:t.exportExcel}},[t._v("导出")])],1),a("el-table",{attrs:{data:t.tableData2,id:"out-table"}},[a("el-table-column",{attrs:{align:"center","header-align":"center",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,o=e.$index;return[n.photoInfo?a("img",{staticClass:"head_pic",attrs:{src:n.photoInfo,width:"40",height:"40"},on:{click:function(e){t.open(o)}}}):t._e()]}}])}),a("el-table-column",{attrs:{align:"center","header-align":"center",label:"发布者"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.name))])]}}])}),a("el-table-column",{attrs:{align:"center","header-align":"center",label:"手机号"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.phonenumber))])]}}])}),a("el-table-column",{attrs:{align:"center","header-align":"center",label:"房型"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.houseStyle))])]}}])}),a("el-table-column",{attrs:{align:"center","header-align":"center",label:"地理信息"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.incity)+","+t._s(n.FormData.location))])]}}])}),a("el-table-column",{attrs:{align:"center","header-align":"center",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.totalPrice))])]}}])}),a("el-table-column",{attrs:{align:"center","header-align":"center",label:"详细介绍"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.Tags))])]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"200",label:"看房时间"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.FormData.LookUpStyle))])]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"200",label:"上架状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.publish?a("span",[t._v("已上架")]):a("span",[t._v("未上架")])]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"200",label:"修改状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,o=e.$index;return[n.publish?a("el-button",{on:{click:function(e){t.updata(o)}}},[t._v("下架")]):a("el-button",{on:{click:function(e){t.updata(o)}}},[t._v("上架")])]}}])})],1)],1)},o=[],l=(a("7f7f"),a("6762"),a("2fdb"),a("cadf"),a("551c"),a("097d"),a("21a6")),r=a.n(l),s=a("1146"),i=a.n(s),c=a("d148"),u=c["a"].init({env:"zufang-4gej561k8ccf648d"}),d=u.database(),f=d.collection("Entrust"),p={name:"DruidMonitor",components:{},data:function(){return{showEdit:[],img:[],drawer:!1,showName:[],showAge:[],name:"",age:"",tableData:[],tableData2:[]}},methods:{exportExcel:function(){var t=i.a.utils.table_to_book(document.querySelector("#out-table")),e=i.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{r.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"房屋信息.xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,e)}return e},open:function(t){var e=this;this.$alert("<img src="+e.tableData2[t].photoInfo+' width="200" class="head_pic"/>',"图片预览",{dangerouslyUseHTMLString:!0})},download:function(){c["a"].downloadFile({fileID:"cloud://zufang-4gej561k8ccf648d.7a75-zufang-4gej561k8ccf648d-1301079356/xlsx/example.xlsx"}).then(function(t){})},getimg:function(){for(var t=this,e=[],a=0;a<this.tableData.length;a++)t.tableData[a].photoInfo&&t.tableData[a].photoInfo[0].includes("cloud://zufang-4gej561k8ccf648d")&&e.push(t.tableData[a].photoInfo[0]);u.getTempFileURL({fileList:e}).then(function(a){for(var n=0;n<t.tableData.length;n++)t.tableData[n].photoInfo&&(t.tableData[n].photoInfo=a.fileList[n].download_url,e[n]=a.fileList[n].download_url);console.log(t.tableData),t.tableData2=t.tableData,t.img=e})},readExcel:function(t){var e=this,a=this,n=t.target.files;if(n.length<=0)return!1;if(!/\.(xls|xlsx)$/.test(n[0].name.toLowerCase()))return this.$Message.error("上传格式不正确，请上传xls或者xlsx格式"),!1;var o=new FileReader;o.onload=function(n){try{var o=n.target.result,l=i.a.read(o,{type:"binary"}),r=l.SheetNames[0],s=i.a.utils.sheet_to_json(l.Sheets[r]);console.log(s,111111111),a.outputs=[];for(var c=0;c<s.length;c++){console.log(333333333333333);var u={photoInfo:s[c]["房屋照片(图片链接)"],EntrustType:"rentout",HouseStyleSelected:s[c]["房间类型(n室n厅n卫生)"]},d={detailLocation:s[c]["详细地址"],location:s[c]["所在小区"],furniture:s[c]["装修配置"],area:s[c]["房子面积"],totalPrice:s[c]["总价"],averagePrice:s[c]["均价"],name:s[c]["委托人姓名"],phonenumber:s[c]["委托人电话"],Tags:s[c]["房子标签(空调热水)"],HouseType:s[c]["出租类型"],roomStyle:s[c]["房间类型(n室n厅n卫生)"],houseStyle:s[c]["居室类型"],LookUpStyle:s[c]["看房方式"],Invoice:s[c]["契税发票时间是否满两年"],Signing:s[c]["网签是否满三年"],incity:s[c]["所在城市"]};u.FormData=d,console.log(u,2222222),a.addhouse(u),a.outputs.push(sheetData)}e.$refs.upload.value=""}catch(t){return!1}},o.readAsBinaryString(n[0])},addhouse:function(t){console.log(4444444),f.add(t).then(function(t){console.log("添加成功",t)})},updata:function(t){console.log(this.tableData[t]._id);var e=this;this.tableData[t].publish?(e.tableData2[t].publish=!1,f.doc(e.tableData[t]._id).update({publish:!1}).then(function(t){})):(e.tableData2[t].publish=!0,f.doc(e.tableData[t]._id).update({publish:!0}).then(function(t){}))}},props:{},watch:{},beforeCreate:function(){},created:function(){var t=localStorage.getItem("web_token"),e=this,a='db.collection("Entrust").limit(342).get()',n={env:"zufang-4gej561k8ccf648d",query:a};this.axios({url:"/lol/databasequery?access_token="+t,method:"post",data:n}).then(function(t){console.log(t);for(var a=0;a<t.data.data.length;a++){var n=JSON.parse(t.data.data[a]);e.tableData.push(n)}console.log(e.tableData),e.getimg()})},beforeMount:function(){},mounted:function(){var t=this;this.$refs.upload.addEventListener("change",function(e){t.readExcel(e)})},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},h=p,b=(a("d417"),a("2877")),g=Object(b["a"])(h,n,o,!1,null,"d4697eea",null);g.options.__file="DruidMonitor.vue";e["default"]=g.exports},b569:function(t,e,a){},d417:function(t,e,a){"use strict";var n=a("b569"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-efd67988.b15bfb22.js.map